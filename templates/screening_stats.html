{%extends "base.html"%}
{%block body %}
<div class="row">
    <div class="col-md-6">
        <div id="votes-when">
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-6">
<table class="table table-striped table-condensed">
    <thead><tr><th>Proposals</th><th>Votes</th></tr></thead>
    <tbody>
        {% for p in progress %}
        <tr><td>{{p.quantity}}</td><td>{{p.vote_count}}</td></tr>
        {% endfor %}
    </tbody>
</table>
    </div>
<div class="col-md-6">
<table class="table table-striped table-condensed">
    <thead><tr><th>Voter</th><th>Votes</th></tr></thead>
    <tbody>
    {% for user in users%}
    <tr><td>{{user.display_name}}</td><td>{{user.votes}}</td></tr>
    {% endfor %}
    </tbody>
</table>
</div>
</div>
{%endblock body%}
{%block extracss%}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/rickshaw/1.5.1/rickshaw.min.css">
{%endblock%}
{%block extrajs%}
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.8/d3.min.js"></script> 
<script src="https://cdnjs.cloudflare.com/ajax/libs/rickshaw/1.5.1/rickshaw.min.js"></script>

<script type="text/javascript">
var votes_when={{votes_when|tojson}};

$(document).ready(function(){
    var votes_when_graph = new Rickshaw.Graph({
        element: document.getElementById('votes-when'),
        width: $('#votes-when').width(),
        height: 200,
        series: [{color:'steelblue', data:votes_when}],
        renderer: 'bar',
    });
    var time = new Rickshaw.Fixtures.Time();
    var days = time.unit('day');
    var vw_xAxis = new Rickshaw.Graph.Axis.Time({
            graph: votes_when_graph,
            timeUnit: days
    });
    var vw_yAxis = new Rickshaw.Graph.Axis.Y({
            graph: votes_when_graph 
    });

    vw_xAxis.render();
    vw_yAxis.render();
    votes_when_graph.render();
});
</script>
{%endblock%}
